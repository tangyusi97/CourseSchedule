"use strict";function getUrlParam(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null==c?null:decodeURI(c[2])}$(function(a){function b(m){return!!m&&void(a(".weui-loadmore").hide(),a("#scheduleTable tbody").html((k[0]({lessons:m.givenLessons[c]})+k[1]({lessons:m.givenLessons[c]})+k[2]({lessons:m.givenLessons[c]})+k[3]({lessons:m.givenLessons[c]})).replace(/<td> @<\/td>/g,"<td></td>")),a("#costomedLessonList").html(l({lessons:m.customedLessons})),a("#tab1Content").show())}var c=1,d=new Date,e=Math.round(d.getTime()/1e3)-24*(3600*(d.getDay()-1)),f=getUrlParam("timestamp");f&&(c=Math.round((e-f)/3600/24/7)+1),a("#week").on("change",function(){a("#tab1Content").hide(),a(".weui-loadmore").show(),c=a("#week").val(),b(i)}),a("#setWEEK").on("click",function(){a(this).swipeout("close");var m=e-3600*(24*(7*(c-1)));location.href=location.origin+location.pathname+"?timestamp="+m});var g=_.template("<% _.forEach(term, (n, i) => { %><option value='<%= i+1 %>'>\u7B2C<%= i+1 %>\u5468</option><% }); %>"),h=_.template("<% _.forEach(list, lesson => { %>\n                                      <div class=\"weui-media-box weui-media-box_text\">\n                                        <h4 class=\"weui-media-box__title\"><%- lesson.name %></h4>\n                                        <p class=\"weui-media-box__desc\"><%- lesson.time %> @<%- lesson.location %></p>\n                                        <p class=\"weui-media-box__desc\"><%- lesson.teacher %> | <%- lesson.periods %>\u5B66\u65F6 <%- lesson.exam %> <%- lesson.class %></p>\n                                      </div>\n                                    <% }); %>"),i={},j=getUrlParam("name")||"schedule";a.getJSON("./json/"+j+".json").done(function(m){i=m,(c>m.givenLessons.length||1>c)&&(alert("\u53C2\u6570\u6709\u8BEF\uFF01"),location.href=location.origin+location.pathname),a("#week").html(g({term:m.givenLessons})),a("#week option[value=\""+c+"\"]").attr("selected",!0).append("\uFF08\u672C\u5468\uFF09"),a("#lessonList").html(h({list:m.lessonList})),a("#lessonList").prev().text("\u6240\u6709\u8BFE\u7A0B\u5217\u8868\uFF08\u5171 "+m.lessonList.length+" \u95E8\u8BFE\uFF09")}).fail(function(){alert("\u53C2\u6570\u6709\u8BEF\uFF01"),location.href=location.origin+location.pathname}).done(b);var k=[_.template("<tr>\n                  <th class=\"text-center\" scope=\"row\">12</th>\n                  <% _.forEach(lessons, weekLessons => { %><td><%- weekLessons[0].name %> @<%- weekLessons[0].location %></td><% }); %>\n                </tr>"),_.template("<tr>\n                  <th class=\"text-center\" scope=\"row\">34</th>\n                  <% _.forEach(lessons, weekLessons => { %><td><%- weekLessons[1].name %> @<%- weekLessons[1].location %></td><% }); %>\n                </tr>"),_.template("<tr>\n                  <th class=\"text-center\" scope=\"row\">56</th>\n                  <% _.forEach(lessons, weekLessons => { %><td><%- weekLessons[2].name %> @<%- weekLessons[2].location %></td><% }); %>\n                </tr>"),_.template("<tr>\n                  <th class=\"text-center\" scope=\"row\">78</th>\n                  <% _.forEach(lessons, weekLessons => { %><td><%- weekLessons[3].name %> @<%- weekLessons[3].location %></td><% }); %>\n                </tr>")],l=_.template("<% _.forEach(lessons, lesson => { %>\n                                          <div class=\"weui-cell\">\n                                            <div class=\"weui-cell__bd\">\n                                              <p><%- lesson.name %></p>\n                                            </div>\n                                            <div class=\"weui-cell__ft\"><%- lesson.teacher %></div>\n                                          </div>\n                                        <% }); %>")});